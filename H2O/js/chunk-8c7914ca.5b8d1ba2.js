(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8c7914ca"],{a577:function(e,t,n){"use strict";n("e0b3")},e0b3:function(e,t,n){},fd91:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"deposit-detail-page"},[n("div",{staticClass:"app-container"},[n("div",{staticClass:"kind"},[n("img",{attrs:{src:e.currentTokenImage(e.name)}}),n("span",[e._v(e._s(e.name))])]),n("div",{staticClass:"property"},e._l(e.propertyList,(function(t){return n("div",{key:t.id,staticClass:"item"},[n("span",{staticClass:"num"},[e._v(e._s(t.id))]),n("span",{staticClass:"name"},[e._v(e._s("un"===e.type?"解押":"质押"))])])})),0),e.kind||e.isDemand?n("p",{staticClass:"title"},[n("span",[e._v("我要"+e._s(e.themeText))])]):n("p",{staticClass:"title"},[n("span",[e._v("我要"+e._s(e.themeText))]),e._l(e.days,(function(t){return n("button",{key:t.id,class:["btn",{active:e.activeDayIndex===t.id}],on:{click:function(n){return e.toggleDays(t)}}},[e._v(" "+e._s(t.name)+" ")])}))],2),n("div",{staticClass:"input-area"},["pl"===e.type?n("div",{staticClass:"receInfo"},[e._v(" 年化收益率："),n("span",[e._v("18%")])]):e._e(),n("div",{staticClass:"balance"},[n("span",{staticClass:"info"},[e._v("余额：")]),n("span",{staticClass:"num"},[e._v(e._s(e.toFixed(e.tokenBalance,6)||"--")+" "+e._s(e.name))])]),n("div",{class:["inputBox",{overMax:e.isConnected&&e.isOverMax}]},[n("img",{attrs:{src:e.currentTokenImage(e.name),alt:""}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.depositNum,expression:"depositNum"}],attrs:{type:"text",minLength:"1",maxLength:"79"},domProps:{value:e.depositNum},on:{input:[function(t){t.target.composing||(e.depositNum=t.target.value)},e.inputEvent]}}),n("button",{on:{click:e.clickAllBtn}},[e._v("MAX")])])]),n("p",{directives:[{name:"show",rawName:"v-show",value:e.isConnected&&e.isOverMax,expression:"isConnected&&isOverMax"}],staticClass:"warn-tips"},[e._v("当前地址余额不足")]),"un"===e.type?n("div",{staticClass:"receive"},[n("p",{staticClass:"tit"},[e._v("您将获得：")]),n("p",{staticClass:"num"},[e._v(e._s(e.depositNum||"--")+" "+e._s(e.name))])]):e._e(),n("div",{staticClass:"submitBtns"},[n("button",{directives:[{name:"loading",rawName:"v-loading",value:e.GettingApprove,expression:"GettingApprove"}],class:["enter",{disabled:e.btnDisabled}],attrs:{disabled:e.btnDisabled},on:{click:e.submitOrder}},[e._v(" "+e._s(e.submitBtnText)+" ")]),n("button",{staticClass:"cancal",on:{click:e.returnPage}},[e._v("返回")])])])])},i=[],s=n("5530"),r=n("1da1"),c=(n("96cf"),n("b0c0"),n("159b"),n("a9e3"),n("d3b7"),n("3a48")),d=n("2f62"),o=n("34e5"),u=n("4729"),l={name:"PledegDetail",data:function(){return{propertyList:[{id:1,name:"币种"}],days:[{id:2,name:"90天",key:"D90"},{id:3,name:"180天",key:"D180"},{id:4,name:"365天",key:"D365"}],activeDayIndex:4,depositNum:"",tokenBalance:"--",ableReceive:"--",tokenAddress:"",originName:"",name:"",approved:0,decimals:18,isDemand:!1,fixedpId:"",demandpId:{D90:"",D180:"",D365:""},unfoldTypeBalance:{day90:{balance:"--",already:!1,ableReceive:""},day180:{balance:"--",already:!1,ableReceive:""},day365:{balance:"--",already:!1,ableReceive:""}}}},created:function(){try{var e=sessionStorage.getItem("plInfo"),t=JSON.parse(e);this.tokenAddress=t.token,this.isDemand=t.demand,this.decimals=t.decimals,this.name=t.name,this.originName=t.originName,t.demand?this.fixedpId=t.pId:(this.days.forEach((function(e){e.id=t[e.key]})),this.activeDayIndex=t.D365,this.demandpId.D90=t.D90,this.demandpId.D180=t.D180,this.demandpId.D365=t.D365)}catch(n){}},mounted:function(){},watch:{isConnected:{immediate:!0,handler:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e&&t.tokenAddress&&!t.approve&&("un"!==t.type?t.getTokenBalanceApprove():t.getTokenBalance(t.pid));case 1:case"end":return n.stop()}}),n)})))()}},tokenAddress:{handler:function(e){this.isConnected&&e&&("un"!==this.type?this.getTokenBalanceApprove():this.getTokenBalance(this.pid))}}},computed:Object(s["a"])({btnDisabled:function(){return this.isConnected&&!(2===this.approved&&"un"!==this.type)&&!Boolean(Number(this.depositNum))||this.isOverMax},themeText:function(){return"un"===this.type?"解押":"质押"},type:function(){return this.$route.query.type},kind:function(){return this.$route.query.kind},GettingApprove:function(){return this.isConnected&&0===this.approved},submitBtnText:function(){return this.isConnected?2===this.approved&&"un"!==this.type?"授权":this.themeText:"链接钱包"},isOverMax:function(){return"--"===this.tokenBalance&&Number(this.depositNum)||"--"!==this.tokenBalance&&Number(this.depositNum)>Number(this.tokenBalance)},unfoldActiveString:function(){var e="day365";switch(this.activeDayIndex){case this.demandpId.D90:e="day90";break;case this.demandpId.D180:e="day180";break}return e},pid:function(){return this.isDemand?this.fixedpId:this.activeDayIndex}},Object(d["c"])({isConnected:function(e){return e.base.isConnected},fairLaunchAddress:function(e){return e.base.fairLaunchAddress},mainTheme:function(e){return e.comps.mainTheme}})),methods:{currentTokenImage:function(e){var t="light"===this.mainTheme?"L":"D";return c["a"][e]&&c["a"][e][t]?c["a"][e][t]:c["a"].default},inputEvent:function(e){this.depositNum=this.$inputLimit(e,6,!0)},toggleDays:function(e){if(this.activeDayIndex=e.id,"un"===this.type){var t=this.unfoldTypeBalance[this.unfoldActiveString];t.already,t.balance;this.approve=0,this.getTokenBalance(this.activeDayIndex)}},returnPage:function(){this.depositNum="",this.$router.go(-1)},submitOrder:function(){var e=this;if(!this.isConnected)return this.$connect();if(2!==this.approved||"un"===this.type){var t="un"===this.type?o["j"]:o["i"],n=this.activeDayIndex;t(this.tokenAddress,this.decimals,this.depositNum,this.pid).finally((function(){e.depositNum="",e.approve=0,e.getTokenBalance(e.pid,n),e.$store.dispatch("judgeDepositCurrentIsIRO",e.tokenAddress)}))}else Object(o["b"])(this.tokenAddress,this.fairLaunchAddress).then((function(){e.approved=1}))},clickAllBtn:function(){this.isConnected&&this.tokenBalance&&(this.depositNum=this.tokenBalance)},getTokenBalanceApprove:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["f"])(e.tokenAddress,e.decimals);case 2:n=t.sent,console.log("balance",n),e.tokenBalance=n,Object(u["A"])(e.tokenAddress,e.decimals,n,e.fairLaunchAddress).then((function(t){e.approved=t?1:2}));case 6:case"end":return t.stop()}}),t)})))()},getTokenBalance:function(){var e=arguments,t=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var a,i,s,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=e.length>0&&void 0!==e[0]?e[0]:2,"un"!==t.type){n.next=15;break}return n.next=4,Object(u["o"])(a,t.decimals);case 4:i=n.sent,console.log("balance",i),s=i,t.tokenBalance=i,t.ableReceive=s,t.approved=1,t.unfoldTypeBalance[t.unfoldActiveString].already=!0,t.unfoldTypeBalance[t.unfoldActiveString].balance=i,t.unfoldTypeBalance[t.unfoldActiveString].ableReceive=s,n.next=21;break;case 15:return n.next=17,Object(u["f"])(t.tokenAddress,t.decimals);case 17:r=n.sent,console.log("balance",r),t.tokenBalance=r,t.approved=1;case 21:case"end":return n.stop()}}),n)})))()}}},p=l,m=(n("a577"),n("2877")),h=Object(m["a"])(p,a,i,!1,null,"7dc2ab50",null);t["default"]=h.exports}}]);