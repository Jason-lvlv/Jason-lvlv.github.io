(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-63dc68c6"],{"15b0":function(e,t,n){"use strict";n("fa45e")},a427:function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"deposit-detail-page"},[n("div",{staticClass:"app-container"},[n("div",{staticClass:"kind"},[n("img",{attrs:{src:e.currentTokenImage(e.name)}}),n("span",[e._v(e._s(e.name))])]),n("div",{staticClass:"property"},e._l(e.propertyList,(function(t){return n("div",{key:t.id,staticClass:"item"},[n("span",{staticClass:"num"},[e._v(e._s(t.id))]),n("span",{staticClass:"name"},[e._v(e._s("et"===e.type?"取款":"存款"))])])})),0),n("p",{staticClass:"title"},[n("span",[e._v("我要"+e._s(e.themeText))])]),n("div",{staticClass:"input-area"},[n("div",{staticClass:"balance"},[n("span",{staticClass:"info"},[e._v("余额：")]),n("span",{staticClass:"num"},[e._v(e._s(e.toFixed(e.tokenBalance,6)||"--")+" "+e._s(e.name))])]),n("div",{class:["inputBox",{overMax:e.isConnected&&e.isOverMax}]},[n("img",{attrs:{src:e.currentTokenImage(e.name),alt:""}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.depositNum,expression:"depositNum"}],attrs:{type:"text",minLength:"1",maxLength:"79"},domProps:{value:e.depositNum},on:{input:[function(t){t.target.composing||(e.depositNum=t.target.value)},e.inputEvent]}}),n("button",{on:{click:e.clickAllBtn}},[e._v("MAX")])])]),n("p",{directives:[{name:"show",rawName:"v-show",value:e.isConnected&&e.isOverMax,expression:"isConnected&&isOverMax"}],staticClass:"warn-tips"},[e._v("当前地址余额不足")]),n("div",{staticClass:"receive"},[n("p",{staticClass:"tit"},[e._v("您将获得：")]),n("p",{staticClass:"num"},[e._v(e._s(e.depositNum*e.rewardRate||"--")+" "+e._s(e.subname))])]),"de"===e.type?n("div",{staticClass:"warn"},[e._v(" 提示：存入后获得计息币，前往质押挖矿页面，质押您的计息币获取质押收益 ")]):e._e(),n("div",{staticClass:"submitBtns"},[n("button",{directives:[{name:"loading",rawName:"v-loading",value:e.GettingApprove,expression:"GettingApprove"}],class:["enter",{disabled:e.btnDisabled}],attrs:{disabled:e.btnDisabled},on:{click:e.submitOrder}},[e._v(" "+e._s(e.submitBtnText)+" ")]),n("button",{staticClass:"cancal",on:{click:e.returnPage}},[e._v("返回")])])])])},i=[],a=n("5530"),r=n("1da1"),o=(n("96cf"),n("b0c0"),n("a9e3"),n("d3b7"),n("3a48")),c=n("2f62"),d=n("34e5"),u=n("4729"),p=(n("b893"),{name:"depositDetail",data:function(){return{propertyList:[{id:1,name:"币种"}],days:[{id:1,name:"30天"},{id:2,name:"60天"},{id:3,name:"90天"},{id:4,name:"180天"}],activeDayIndex:4,depositNum:"",rewardRate:1,tokenBalance:"--",tokenAddress:"",originAddress:"",name:"",subname:"",approved:0,decimals:18,origindecimals:18}},created:function(){try{var e=sessionStorage.getItem("deInfo"),t=JSON.parse(e);this.tokenAddress=t.token,this.originAddress=t.originToken,this.origindecimals=t.origindecimals,this.decimals=t.decimals,"et"===this.type?(this.name=t.name_h,this.subname=t.name):(this.name=t.name,this.subname=t.name_h)}catch(n){}},mounted:function(){},watch:{isConnected:{immediate:!0,handler:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e&&t.tokenAddress&&!t.approve&&("et"!==t.type?t.getTokenBalanceApprove():t.getTokenBalance());case 1:case"end":return n.stop()}}),n)})))()}},tokenAddress:{handler:function(e){this.isConnected&&e&&("et"!==this.type?this.getTokenBalanceApprove():this.getTokenBalance())}}},computed:Object(a["a"])({btnDisabled:function(){return this.isConnected&&!(2===this.approved&&"et"!==this.type)&&!Boolean(Number(this.depositNum))||this.isOverMax},themeText:function(){return"et"===this.type?"提取":"存入"},type:function(){return this.$route.query.type},GettingApprove:function(){return this.isConnected&&0===this.approved},submitBtnText:function(){return this.isConnected?2===this.approved&&"et"!==this.type?"授权":this.themeText:"链接钱包"},isOverMax:function(){return"--"===this.tokenBalance&&Number(this.depositNum)||"--"!==this.tokenBalance&&Number(this.depositNum)>Number(this.tokenBalance)}},Object(c["c"])({isConnected:function(e){return e.base.isConnected},address:function(e){return e.base.address},mainTheme:function(e){return e.comps.mainTheme}})),methods:{inputEvent:function(e){this.depositNum=this.$inputLimit(e,6,!0)},toggleDays:function(e){this.activeDayIndex=e.id},returnPage:function(){this.depositNum="",this.$router.go(-1)},submitOrder:function(){var e=this;if(!this.isConnected)return this.$connect();if(2!==this.approved||"et"===this.type){var t="et"===this.type?d["d"]:d["c"];t(this.originAddress,this.origindecimals,this.depositNum).finally((function(){e.depositNum="",e.getTokenBalance(),e.$store.commit("setDepositCurrent",e.tokenAddress)}))}else Object(d["b"])(this.tokenAddress).then((function(){e.approved=1}))},clickAllBtn:function(){this.isConnected&&this.tokenBalance&&(this.depositNum=this.tokenBalance)},getTokenBalanceApprove:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["f"])(e.tokenAddress,e.decimals);case 2:if(n=t.sent,console.log("balance",n),e.tokenBalance=n,"0x0000000000000000000000000000000000000000"!==e.tokenAddress){t.next=8;break}return e.approved=1,t.abrupt("return");case 8:Object(u["A"])(e.tokenAddress,e.decimals,n).then((function(t){e.approved=t?1:2}));case 9:case"end":return t.stop()}}),t)})))()},getTokenBalance:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["j"])(e.tokenAddress,e.decimals);case 2:return n=t.sent,t.next=5,Object(u["y"])(e.originAddress,e.origindecimals);case 5:return s=t.sent,isNaN(n)||isNaN(s)||(e.rewardRate=Number(s)/Number(n),console.log("rewardRate",e.rewardRate)),t.next=9,Object(u["f"])(e.tokenAddress,e.decimals);case 9:i=t.sent,console.log("balance",i),e.tokenBalance=i,e.approved=1;case 13:case"end":return t.stop()}}),t)})))()},currentTokenImage:function(e){var t="light"===this.mainTheme?"L":"D";return o["a"][e]&&o["a"][e][t]?o["a"][e][t]:o["a"].default}}}),m=p,l=(n("15b0"),n("2877")),h=Object(l["a"])(m,s,i,!1,null,"b2d62aa6",null);t["default"]=h.exports},fa45e:function(e,t,n){}}]);