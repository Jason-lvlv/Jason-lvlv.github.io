webpackJsonp([4],{"3Sr/":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("Dd8w"),i=n.n(a),s=n("NYxO"),r=n("JHeQ"),o={name:"depositDetail",data:function(){return{propertyList:[{id:1,name:"质押币种"}],days:[{id:1,name:"30天"},{id:2,name:"60天"},{id:3,name:"90天"},{id:4,name:"180天"}],activeDayIndex:4,depositNum:""}},watch:{isConnected:{immediate:!0,handler:function(e){e&&"et"!==this.type&&this.$store.dispatch("getTokenBalance")}}},computed:i()({btnDisabled:function(){return this.isConnected&&!(2===this.approved&&"et"!==this.type)&&!Boolean(Number(this.depositNum))},themeText:function(){return"et"===this.type?"提取":"存入"},type:function(){return this.$route.query.type},GettingApprove:function(){return this.isConnected&&0===this.approved&&"et"!==this.type},submitBtnText:function(){return this.isConnected?2===this.approved&&"et"!==this.type?"授权":this.themeText:"链接钱包"}},Object(s.c)({isConnected:function(e){return e.base.isConnected},tokenBalance:function(e){return e.base.tokenBalance},approved:function(e){return e.base.depositToken.approved},tokenAddress:function(e){return e.base.tokenAddress}})),methods:{inputEvent:function(e){this.depositNum=this.$inputLimit(e,6,!0)},toggleDays:function(e){this.activeDayIndex=e.id},returnPage:function(){this.$router.go(-1)},submitOrder:function(){var e=this;if(!this.isConnected)return this.$connect();2!==this.approved||"et"===this.type?("et"===this.type?r.c:r.b)(this.depositNum).finally(function(){e.depositNum=""}):Object(r.a)(this.tokenAddress).then(function(){e.$store.commit("setTokenApprove",!0)})}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"deposit-detail-page"},[a("div",{staticClass:"depositInner"},[e._m(0),e._v(" "),a("div",{staticClass:"property"},e._l(e.propertyList,function(t){return a("div",{key:t.id,staticClass:"item"},[a("span",{staticClass:"num"},[e._v(e._s(t.id))]),e._v(" "),a("span",{staticClass:"name"},[e._v(e._s(t.name))])])}),0),e._v(" "),"et"===e.type?a("p",{staticClass:"title"},[a("span",[e._v("我要"+e._s(e.themeText))])]):a("p",{staticClass:"title"},[a("span",[e._v("我要"+e._s(e.themeText))]),e._v(" "),e._l(e.days,function(t){return a("button",{key:t.id,class:["btn",{active:e.activeDayIndex===t.id}],on:{click:function(n){return e.toggleDays(t)}}},[e._v("\n                "+e._s(t.name)+"\n            ")])})],2),e._v(" "),a("div",{staticClass:"input-area"},[e._m(1),e._v(" "),a("div",{staticClass:"inputBox"},[a("img",{attrs:{src:n("Gvdv"),alt:""}}),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.depositNum,expression:"depositNum"}],attrs:{type:"text",minLength:"1",maxLength:"79"},domProps:{value:e.depositNum},on:{input:[function(t){t.target.composing||(e.depositNum=t.target.value)},e.inputEvent]}}),e._v(" "),a("button",[e._v("MAX")])])]),e._v(" "),e._m(2),e._v(" "),a("div",{staticClass:"warn"},[e._v("\n            提示：存入后获得计息币，前往质押挖矿页面，质押您的计息币获取质押收益\n        ")]),e._v(" "),a("div",{staticClass:"submitBtns"},[a("button",{class:["enter",{disabled:e.btnDisabled}],attrs:{disabled:e.btnDisabled},on:{click:e.submitOrder}},[e._v(e._s(e.submitBtnText))]),e._v(" "),a("button",{staticClass:"cancal",on:{click:e.returnPage}},[e._v("返回")])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"kind"},[t("img",{attrs:{src:n("Gvdv")}}),this._v(" "),t("span",[this._v("BND")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"balance"},[t("span",{staticClass:"info"},[this._v("余额：")]),this._v(" "),t("span",{staticClass:"num"},[this._v("100 BND")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"receive"},[t("p",{staticClass:"tit"},[this._v("您将获得：")]),this._v(" "),t("p",{staticClass:"num"},[t("span",[this._v("500")]),this._v(" idBND")])])}]};var u=n("VU/8")(o,p,!1,function(e){n("Qh99")},"data-v-6c32b66e",null);t.default=u.exports},JHeQ:function(e,t,n){"use strict";n.d(t,"d",function(){return h}),n.d(t,"a",function(){return _}),n.d(t,"b",function(){return T}),n.d(t,"c",function(){return v});var a=n("Xxa5"),i=n.n(a),s=n("exGp"),r=n.n(s),o=n("//Fk"),p=n.n(o),u=n("GKmE"),d=n("W156"),c=n.n(d),y=n("yePN"),l=n.n(y),m=n("Kdzl"),b=n.n(m),h=function(e){var t=this;console.log("receiveAirdrop",e);var n=__ownInstance__.$store.state.base.address,a=__ownInstance__.$store.state.base.airdropAddress,s=new web3.eth.Contract(c.a,a).methods.draw(e).encodeABI(),o=(new Date).getTime().toString();return __ownInstance__.$store.dispatch("createOrderForm",{val:0,id:o}),new p.a(function(e,p){var u,d=void 0;web3.eth.getTransactionCount(n).then((u=r()(i.a.mark(function r(u){var c,y,l;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,web3.eth.getGasPrice();case 2:return c=t.sent,t.next=5,web3.eth.estimateGas({from:n,to:a,data:s});case 5:y=t.sent,console.log("estimateGas",y),l=[{from:n,to:a,data:s,gasPrice:web3.utils.toHex(c),gas:web3.utils.toHex(y)}],web3.eth.sendTransaction(l[0]).on("transactionHash",function(e){console.log("hash",e),e&&(d=e)}).on("receipt",function(t){__ownInstance__.$store.dispatch("getAirdropValue"),__ownInstance__.$store.dispatch("getAirDropDrawed"),__ownInstance__.$store.dispatch("changeTradeStatus",{kind:"redeem",id:o,val:1,type:"receive",hash:d}),e(d)}).on("confirmation",function(e,t){}).on("error",function(e){var t=4001===e.code;__ownInstance__.$store.dispatch("changeTradeStatus",{id:o,val:2,isUserDeny:t,hash:d}),console.log("err",e),p(e)});case 9:case"end":return t.stop()}},r,t)})),function(e){return u.apply(this,arguments)})).catch(function(e){console.log("receiveAirdrop_err",e),__ownInstance__.$store.dispatch("changeTradeStatus",{id:o,val:2,hash:d}),p(e)})})},_=function(e,t,n,a){var s=this,o=__ownInstance__.$store.state.base.address,d=n&&a?web3.utils.toHex(Object(u.e)(n,a)):web3.utils.toHex(Object(u.f)(1.157920892373163*Math.pow(10,59))),c=new web3.eth.Contract(l.a,e),y=t||__ownInstance__.$store.state.base.bankAddress,m=c.methods.approve(y,d).encodeABI();return new p.a(function(t,n){var a;web3.eth.getTransactionCount(o).then((a=r()(i.a.mark(function a(r){var p,u;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,web3.eth.getGasPrice();case 2:p=a.sent,u=[{chainId:__ownInstance__.$store.state.base.chainId,nonce:web3.utils.toHex(r),gasLimit:web3.utils.toHex(6e6),gasPrice:web3.utils.toHex(p),to:e,from:o,data:m}],ethereum.request({method:"eth_sendTransaction",params:u}).then(function(e){t(e)}).catch(function(e){n(e)});case 5:case"end":return a.stop()}},a,s)})),function(e){return a.apply(this,arguments)}))})},T=function(e){var t=this;console.log("depositPutIn",e);var n=__ownInstance__.$store.state.base.tokenAddress,a=__ownInstance__.$store.state.base.address,s=__ownInstance__.$store.state.base.bankAddress,o=new web3.eth.Contract(b.a,s),d=Object(u.e)(e,__ownInstance__.$store.state.base.depositToken.decimals),c=o.methods.deposit(n,web3.utils.toHex(d)).encodeABI(),y=(new Date).getTime().toString();return __ownInstance__.$store.dispatch("createOrderForm",{val:0,id:y}),new p.a(function(e,n){var o,p=void 0;web3.eth.getTransactionCount(a).then((o=r()(i.a.mark(function r(o){var u,d,l;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,web3.eth.getGasPrice();case 2:return u=t.sent,t.next=5,web3.eth.estimateGas({from:a,to:s,data:c});case 5:d=t.sent,console.log("estimateGas",d),l=[{from:a,to:s,data:c,gasPrice:web3.utils.toHex(u),gas:web3.utils.toHex(d)}],web3.eth.sendTransaction(l[0]).on("transactionHash",function(e){console.log("hash",e),e&&(p=e)}).on("receipt",function(t){__ownInstance__.$store.dispatch("changeTradeStatus",{id:y,val:1,hash:p}),e(p)}).on("confirmation",function(e,t){}).on("error",function(e){var t=4001===e.code;__ownInstance__.$store.dispatch("changeTradeStatus",{id:y,val:2,isUserDeny:t,hash:p}),console.log("err",e),n(e)});case 9:case"end":return t.stop()}},r,t)})),function(e){return o.apply(this,arguments)})).catch(function(e){console.log("receiveAirdrop_err",e),__ownInstance__.$store.dispatch("changeTradeStatus",{id:y,val:2,hash:p}),n(e)})})},v=function(e){var t=this;console.log("depositPutOut",e);var n=__ownInstance__.$store.state.base.tokenAddress,a=__ownInstance__.$store.state.base.address,s=__ownInstance__.$store.state.base.bankAddress,o=new web3.eth.Contract(b.a,s),d=Object(u.e)(e,__ownInstance__.$store.state.base.depositToken.decimals),c=o.methods.withdraw(n,web3.utils.toHex(d)).encodeABI(),y=(new Date).getTime().toString();return __ownInstance__.$store.dispatch("createOrderForm",{val:0,id:y}),new p.a(function(e,n){var o,p=void 0;web3.eth.getTransactionCount(a).then((o=r()(i.a.mark(function r(o){var u,d,l;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,web3.eth.getGasPrice();case 2:return u=t.sent,t.next=5,web3.eth.estimateGas({from:a,to:s,data:c});case 5:d=t.sent,console.log("estimateGas",d),l=[{from:a,to:s,data:c,gasPrice:web3.utils.toHex(u),gas:web3.utils.toHex(d)}],web3.eth.sendTransaction(l[0]).on("transactionHash",function(e){console.log("hash",e),e&&(p=e)}).on("receipt",function(t){__ownInstance__.$store.dispatch("changeTradeStatus",{id:y,val:1,hash:p}),e(p)}).on("confirmation",function(e,t){}).on("error",function(e){var t=4001===e.code;__ownInstance__.$store.dispatch("changeTradeStatus",{id:y,val:2,isUserDeny:t,hash:p}),console.log("err",e),n(e)});case 9:case"end":return t.stop()}},r,t)})),function(e){return o.apply(this,arguments)})).catch(function(e){console.log("receiveAirdrop_err",e),__ownInstance__.$store.dispatch("changeTradeStatus",{id:y,val:2,hash:p}),n(e)})})}},Kdzl:function(e,t){e.exports=[{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"uint256",name:"debtShare",type:"uint256"}],name:"AddDebt",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"id",type:"uint256"},{indexed:!0,internalType:"address",name:"killer",type:"address"},{indexed:!1,internalType:"uint256",name:"prize",type:"uint256"},{indexed:!1,internalType:"uint256",name:"left",type:"uint256"}],name:"Kill",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"uint256",name:"debtShare",type:"uint256"}],name:"RemoveDebt",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"uint256",name:"debt",type:"uint256"},{indexed:!1,internalType:"uint256",name:"back",type:"uint256"}],name:"Work",type:"event"},{inputs:[],name:"acceptGovernor",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"string",name:"_symbol",type:"string"}],name:"addBank",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"banks",outputs:[{internalType:"address",name:"tokenAddr",type:"address"},{internalType:"address",name:"ibTokenAddr",type:"address"},{internalType:"bool",name:"isOpen",type:"bool"},{internalType:"bool",name:"canDeposit",type:"bool"},{internalType:"bool",name:"canWithdraw",type:"bool"},{internalType:"uint256",name:"totalVal",type:"uint256"},{internalType:"uint256",name:"totalDebt",type:"uint256"},{internalType:"uint256",name:"totalDebtShare",type:"uint256"},{internalType:"uint256",name:"totalReserve",type:"uint256"},{internalType:"uint256",name:"lastInterestTime",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"calInterest",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"config",outputs:[{internalType:"contract BankConfig",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"pid",type:"uint256"},{internalType:"bool",name:"isOpen",type:"bool"},{internalType:"bool",name:"canBorrow",type:"bool"},{internalType:"address",name:"coinToken",type:"address"},{internalType:"address",name:"currencyToken",type:"address"},{internalType:"address",name:"borrowToken",type:"address"},{internalType:"address",name:"goblin",type:"address"},{internalType:"uint256",name:"minDebt",type:"uint256"},{internalType:"uint256",name:"maxDebt",type:"uint256"},{internalType:"uint256",name:"openFactor",type:"uint256"},{internalType:"uint256",name:"liquidateFactor",type:"uint256"}],name:"createProduction",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"addr",type:"address"},{internalType:"bool",name:"status",type:"bool"}],name:"createkillWhitelist",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"currentPid",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"currentPos",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"debtShare",type:"uint256"}],name:"debtShareToVal",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"debtVal",type:"uint256"}],name:"debtValToShare",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"deposit",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"devAddr",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"_symbol",type:"string"}],name:"genIBToken",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getAllPosition",outputs:[{components:[{internalType:"uint256",name:"posid",type:"uint256"},{internalType:"address",name:"token0",type:"address"},{internalType:"address",name:"token1",type:"address"},{internalType:"address",name:"borrowToken",type:"address"},{internalType:"uint256",name:"positionsValue",type:"uint256"},{internalType:"uint256",name:"totalValue",type:"uint256"},{internalType:"address",name:"goblin",type:"address"}],internalType:"struct Bank.Pos[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getUserPosition",outputs:[{components:[{internalType:"uint256",name:"posid",type:"uint256"},{internalType:"address",name:"token0",type:"address"},{internalType:"address",name:"token1",type:"address"},{internalType:"address",name:"borrowToken",type:"address"},{internalType:"uint256",name:"positionsValue",type:"uint256"},{internalType:"uint256",name:"totalValue",type:"uint256"},{internalType:"address",name:"goblin",type:"address"}],internalType:"struct Bank.Pos[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"governor",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"ibTokenCalculation",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract BankConfig",name:"_config",type:"address"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"posId",type:"uint256"}],name:"kill",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"killWhitelist",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"pendingGovernor",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"posId",type:"uint256"}],name:"positionInfo",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"positions",outputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"productionId",type:"uint256"},{internalType:"uint256",name:"debtShare",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"productions",outputs:[{internalType:"address",name:"coinToken",type:"address"},{internalType:"address",name:"currencyToken",type:"address"},{internalType:"address",name:"borrowToken",type:"address"},{internalType:"bool",name:"isOpen",type:"bool"},{internalType:"bool",name:"canBorrow",type:"bool"},{internalType:"address",name:"goblin",type:"address"},{internalType:"uint256",name:"minDebt",type:"uint256"},{internalType:"uint256",name:"maxDebt",type:"uint256"},{internalType:"uint256",name:"openFactor",type:"uint256"},{internalType:"uint256",name:"liquidateFactor",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"addr",type:"address"}],name:"setDevAddr",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_pendingGovernor",type:"address"}],name:"setPendingGovernor",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"totalToken",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract BankConfig",name:"_config",type:"address"}],name:"updateConfig",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"}],name:"userPosition",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"pAmount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"withdrawReserve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"posId",type:"uint256"},{internalType:"uint256",name:"pid",type:"uint256"},{internalType:"uint256",name:"borrow",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"work",outputs:[],stateMutability:"payable",type:"function"},{stateMutability:"payable",type:"receive"}]},Qh99:function(e,t){}});