webpackJsonp([4],{"3Sr/":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("Dd8w"),i=n.n(a),s=n("NYxO"),o=n("JHeQ"),r={name:"depositDetail",data:function(){return{propertyList:[{id:1,name:"币种"}],days:[{id:1,name:"30天"},{id:2,name:"60天"},{id:3,name:"90天"},{id:4,name:"180天"}],activeDayIndex:4,depositNum:""}},mounted:function(){var e=this;setTimeout(function(){"--"===e.tokenBalance&&e.$store.dispatch("getTokenBalance")},300)},watch:{isConnected:{immediate:!0,handler:function(e){e&&"et"!==this.type&&this.$store.dispatch("getTokenApproved")}}},computed:i()({btnDisabled:function(){return this.isConnected&&!(2===this.approved&&"et"!==this.type)&&!Boolean(Number(this.depositNum))||this.isOverMax},themeText:function(){return"et"===this.type?"提取":"存入"},type:function(){return this.$route.query.type},kind:function(){return this.$route.query.kind},tokenKind:function(){return"et"===this.type?"h"+this.kind:this.kind},GettingApprove:function(){return this.isConnected&&0===this.approved&&"et"!==this.type},submitBtnText:function(){return this.isConnected?2===this.approved&&"et"!==this.type?"授权":this.themeText:"链接钱包"},isOverMax:function(){return"--"!==this.tokenBalance&&Number(this.depositNum)>Number("et"===this.type?this.H_tokenBalance:this.tokenBalance)}},Object(s.c)({isConnected:function(e){return e.base.isConnected},tokenBalance:function(e){return e.base.depositToken.balance},approved:function(e){return e.base.depositToken.approved},tokenAddress:function(e){return e.base.tokenAddress},H_tokenBalance:function(e){return e.base.depositToken.Hbalnace}})),methods:{inputEvent:function(e){this.depositNum=this.$inputLimit(e,6,!0)},toggleDays:function(e){this.activeDayIndex=e.id},returnPage:function(){this.depositNum="",this.$router.go(-1)},submitOrder:function(){var e=this;if(!this.isConnected)return this.$connect();2!==this.approved||"et"===this.type?("et"===this.type?o.c:o.b)(this.depositNum).finally(function(){e.depositNum=""}):Object(o.a)(this.tokenAddress).then(function(){e.$store.commit("setTokenApprove",!0)})},clickAllBtn:function(){this.isConnected&&this.tokenBalance&&("et"===this.type?this.depositNum=this.H_tokenBalance:this.depositNum=this.tokenBalance)}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"deposit-detail-page"},[a("div",{staticClass:"depositInner"},[a("div",{staticClass:"kind"},[a("img",{attrs:{src:n("Gvdv")}}),e._v(" "),a("span",[e._v(e._s(e.tokenKind))])]),e._v(" "),a("div",{staticClass:"property"},e._l(e.propertyList,function(t){return a("div",{key:t.id,staticClass:"item"},[a("span",{staticClass:"num"},[e._v(e._s(t.id))]),e._v(" "),a("span",{staticClass:"name"},[e._v(e._s("et"===e.type?"取款":"存款"))])])}),0),e._v(" "),a("p",{staticClass:"title"},[a("span",[e._v("我要"+e._s(e.themeText))])]),e._v(" "),a("div",{staticClass:"input-area"},[a("div",{staticClass:"balance"},[a("span",{staticClass:"info"},[e._v("余额：")]),e._v(" "),a("span",{staticClass:"num"},[e._v(e._s("et"===e.type?e.H_tokenBalance:e.tokenBalance)+" "+e._s(e.tokenKind))])]),e._v(" "),a("div",{class:["inputBox",{overMax:e.isConnected&&e.isOverMax}]},[a("img",{attrs:{src:n("Gvdv"),alt:""}}),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.depositNum,expression:"depositNum"}],attrs:{type:"number",minLength:"1",maxLength:"79"},domProps:{value:e.depositNum},on:{input:[function(t){t.target.composing||(e.depositNum=t.target.value)},e.inputEvent]}}),e._v(" "),a("button",{on:{click:e.clickAllBtn}},[e._v("MAX")])])]),e._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:e.isConnected&&e.isOverMax,expression:"isConnected&&isOverMax"}],staticClass:"warn-tips"},[e._v("当前地址余额不足")]),e._v(" "),a("div",{staticClass:"receive"},[a("p",{staticClass:"tit"},[e._v("您将获得：")]),e._v(" "),a("p",{staticClass:"num"},[a("span",[e._v(e._s(e.depositNum||"--"))]),e._v(" "+e._s("et"===this.type?this.kind:"h"+this.kind))])]),e._v(" "),"de"===e.type?a("div",{staticClass:"warn"},[e._v("\n            提示：存入后获得计息币，前往质押挖矿页面，质押您的计息币获取质押收益\n        ")]):e._e(),e._v(" "),a("div",{staticClass:"submitBtns"},[a("button",{class:["enter",{disabled:e.btnDisabled}],attrs:{disabled:e.btnDisabled},on:{click:e.submitOrder}},[e._v(e._s(e.submitBtnText))]),e._v(" "),a("button",{staticClass:"cancal",on:{click:e.returnPage}},[e._v("返回")])])])])},staticRenderFns:[]};var u=n("VU/8")(r,p,!1,function(e){n("ClFN")},"data-v-4ce86394",null);t.default=u.exports},ClFN:function(e,t){},JHeQ:function(e,t,n){"use strict";n.d(t,"d",function(){return _}),n.d(t,"a",function(){return h}),n.d(t,"b",function(){return T}),n.d(t,"c",function(){return v});var a=n("Xxa5"),i=n.n(a),s=n("exGp"),o=n.n(s),r=n("//Fk"),p=n.n(r),u=n("GKmE"),d=n("W156"),c=n.n(d),l=n("yePN"),y=n.n(l),m=n("Kdzl"),b=n.n(m),_=function(e){var t=this;console.log("receiveAirdrop",e);var n=__ownInstance__.$store.state.base.address,a=__ownInstance__.$store.state.base.airdropAddress,s=new web3.eth.Contract(c.a,a).methods.draw(e).encodeABI(),r=(new Date).getTime().toString();return __ownInstance__.$store.dispatch("createOrderForm",{val:0,id:r}),new p.a(function(e,p){var u,d=void 0;web3.eth.getTransactionCount(n).then((u=o()(i.a.mark(function o(u){var c,l,y;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,web3.eth.getGasPrice();case 2:return c=t.sent,t.next=5,web3.eth.estimateGas({from:n,to:a,data:s});case 5:l=t.sent,console.log("estimateGas",l),y=[{from:n,to:a,data:s,gasPrice:web3.utils.toHex(c),gas:web3.utils.toHex(l)}],web3.eth.sendTransaction(y[0]).on("transactionHash",function(e){console.log("hash",e),e&&(d=e)}).on("receipt",function(t){__ownInstance__.$store.dispatch("getAirdropValue"),__ownInstance__.$store.dispatch("getAirDropDrawed"),__ownInstance__.$store.dispatch("changeTradeStatus",{kind:"redeem",id:r,val:1,type:"receive",hash:d}),e(d)}).on("confirmation",function(e,t){}).on("error",function(e){var t=4001===e.code;__ownInstance__.$store.dispatch("changeTradeStatus",{id:r,val:2,isUserDeny:t,hash:d}),console.log("err",e),p(e)});case 9:case"end":return t.stop()}},o,t)})),function(e){return u.apply(this,arguments)})).catch(function(e){console.log("receiveAirdrop_err",e),__ownInstance__.$store.dispatch("changeTradeStatus",{id:r,val:2,hash:d}),p(e)})})},h=function(e,t,n,a){var s=this,r=__ownInstance__.$store.state.base.address,d=n&&a?web3.utils.toHex(Object(u.e)(n,a)):web3.utils.toHex(Object(u.f)(1.157920892373163*Math.pow(10,59))),c=new web3.eth.Contract(y.a,e),l=t||__ownInstance__.$store.state.base.bankAddress,m=c.methods.approve(l,d).encodeABI();return new p.a(function(t,n){var a;web3.eth.getTransactionCount(r).then((a=o()(i.a.mark(function a(o){var p,u;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,web3.eth.getGasPrice();case 2:p=a.sent,u=[{chainId:__ownInstance__.$store.state.base.chainId,nonce:web3.utils.toHex(o),gasLimit:web3.utils.toHex(6e6),gasPrice:web3.utils.toHex(p),to:e,from:r,data:m}],ethereum.request({method:"eth_sendTransaction",params:u}).then(function(e){t(e)}).catch(function(e){n(e)});case 5:case"end":return a.stop()}},a,s)})),function(e){return a.apply(this,arguments)}))})},T=function(e){var t=this;console.log("depositPutIn",e);var n=__ownInstance__.$store.state.base.tokenAddress,a=__ownInstance__.$store.state.base.address,s=__ownInstance__.$store.state.base.bankAddress,r=new web3.eth.Contract(b.a,s),d=Object(u.e)(e,__ownInstance__.$store.state.base.depositToken.decimals),c=r.methods.deposit(n,web3.utils.toHex(d)).encodeABI(),l=(new Date).getTime().toString();return __ownInstance__.$store.dispatch("createOrderForm",{val:0,id:l}),new p.a(function(e,n){var r,p=void 0;web3.eth.getTransactionCount(a).then((r=o()(i.a.mark(function o(r){var u,d,y;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,web3.eth.getGasPrice();case 2:return u=t.sent,t.next=5,web3.eth.estimateGas({from:a,to:s,data:c});case 5:d=t.sent,console.log("estimateGas",d),y=[{from:a,to:s,data:c,gasPrice:web3.utils.toHex(u),gas:web3.utils.toHex(d)}],web3.eth.sendTransaction(y[0]).on("transactionHash",function(e){console.log("hash",e),e&&(p=e)}).on("receipt",function(t){__ownInstance__.$store.dispatch("get_HTokenBalance","0x14fc237354fa2027a23b8e104d76c3b0ec4051e6"),__ownInstance__.$store.dispatch("getTokenBalance"),__ownInstance__.$store.dispatch("changeTradeStatus",{id:l,val:1,hash:p}),e(p)}).on("confirmation",function(e,t){}).on("error",function(e){var t=4001===e.code;__ownInstance__.$store.dispatch("changeTradeStatus",{id:l,val:2,isUserDeny:t,hash:p}),console.log("err",e),n(e)});case 9:case"end":return t.stop()}},o,t)})),function(e){return r.apply(this,arguments)})).catch(function(e){console.log("receiveAirdrop_err",e),__ownInstance__.$store.dispatch("changeTradeStatus",{id:l,val:2,hash:p}),n(e)})})},v=function(e){var t=this;console.log("depositPutOut",e);var n=__ownInstance__.$store.state.base.tokenAddress,a=__ownInstance__.$store.state.base.address,s=__ownInstance__.$store.state.base.bankAddress,r=new web3.eth.Contract(b.a,s),d=Object(u.e)(e,__ownInstance__.$store.state.base.depositToken.decimals),c=r.methods.withdraw(n,web3.utils.toHex(d)).encodeABI(),l=(new Date).getTime().toString();return __ownInstance__.$store.dispatch("createOrderForm",{val:0,id:l}),new p.a(function(e,n){var r,p=void 0;web3.eth.getTransactionCount(a).then((r=o()(i.a.mark(function o(r){var u,d,y;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,web3.eth.getGasPrice();case 2:return u=t.sent,t.next=5,web3.eth.estimateGas({from:a,to:s,data:c});case 5:d=t.sent,console.log("estimateGas",d),y=[{from:a,to:s,data:c,gasPrice:web3.utils.toHex(u),gas:web3.utils.toHex(d)}],web3.eth.sendTransaction(y[0]).on("transactionHash",function(e){console.log("hash",e),e&&(p=e)}).on("receipt",function(t){__ownInstance__.$store.dispatch("get_HTokenBalance","0x14fc237354fa2027a23b8e104d76c3b0ec4051e6"),__ownInstance__.$store.dispatch("getTokenBalance"),__ownInstance__.$store.dispatch("changeTradeStatus",{id:l,val:1,hash:p}),e(p)}).on("confirmation",function(e,t){}).on("error",function(e){var t=4001===e.code;__ownInstance__.$store.dispatch("changeTradeStatus",{id:l,val:2,isUserDeny:t,hash:p}),console.log("err",e),n(e)});case 9:case"end":return t.stop()}},o,t)})),function(e){return r.apply(this,arguments)})).catch(function(e){console.log("receiveAirdrop_err",e),__ownInstance__.$store.dispatch("changeTradeStatus",{id:l,val:2,hash:p}),n(e)})})}},Kdzl:function(e,t){e.exports=[{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"uint256",name:"debtShare",type:"uint256"}],name:"AddDebt",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"id",type:"uint256"},{indexed:!0,internalType:"address",name:"killer",type:"address"},{indexed:!1,internalType:"uint256",name:"prize",type:"uint256"},{indexed:!1,internalType:"uint256",name:"left",type:"uint256"}],name:"Kill",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"uint256",name:"debtShare",type:"uint256"}],name:"RemoveDebt",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"uint256",name:"debt",type:"uint256"},{indexed:!1,internalType:"uint256",name:"back",type:"uint256"}],name:"Work",type:"event"},{inputs:[],name:"acceptGovernor",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"string",name:"_symbol",type:"string"}],name:"addBank",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"banks",outputs:[{internalType:"address",name:"tokenAddr",type:"address"},{internalType:"address",name:"ibTokenAddr",type:"address"},{internalType:"bool",name:"isOpen",type:"bool"},{internalType:"bool",name:"canDeposit",type:"bool"},{internalType:"bool",name:"canWithdraw",type:"bool"},{internalType:"uint256",name:"totalVal",type:"uint256"},{internalType:"uint256",name:"totalDebt",type:"uint256"},{internalType:"uint256",name:"totalDebtShare",type:"uint256"},{internalType:"uint256",name:"totalReserve",type:"uint256"},{internalType:"uint256",name:"lastInterestTime",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"calInterest",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"config",outputs:[{internalType:"contract BankConfig",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"pid",type:"uint256"},{internalType:"bool",name:"isOpen",type:"bool"},{internalType:"bool",name:"canBorrow",type:"bool"},{internalType:"address",name:"coinToken",type:"address"},{internalType:"address",name:"currencyToken",type:"address"},{internalType:"address",name:"borrowToken",type:"address"},{internalType:"address",name:"goblin",type:"address"},{internalType:"uint256",name:"minDebt",type:"uint256"},{internalType:"uint256",name:"maxDebt",type:"uint256"},{internalType:"uint256",name:"openFactor",type:"uint256"},{internalType:"uint256",name:"liquidateFactor",type:"uint256"}],name:"createProduction",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"addr",type:"address"},{internalType:"bool",name:"status",type:"bool"}],name:"createkillWhitelist",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"currentPid",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"currentPos",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"debtShare",type:"uint256"}],name:"debtShareToVal",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"debtVal",type:"uint256"}],name:"debtValToShare",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"deposit",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"devAddr",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"_symbol",type:"string"}],name:"genIBToken",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getAllPosition",outputs:[{components:[{internalType:"uint256",name:"posid",type:"uint256"},{internalType:"address",name:"token0",type:"address"},{internalType:"address",name:"token1",type:"address"},{internalType:"address",name:"borrowToken",type:"address"},{internalType:"uint256",name:"positionsValue",type:"uint256"},{internalType:"uint256",name:"totalValue",type:"uint256"},{internalType:"address",name:"goblin",type:"address"}],internalType:"struct Bank.Pos[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getAllToken",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getUserPosition",outputs:[{components:[{internalType:"uint256",name:"posid",type:"uint256"},{internalType:"address",name:"token0",type:"address"},{internalType:"address",name:"token1",type:"address"},{internalType:"address",name:"borrowToken",type:"address"},{internalType:"uint256",name:"positionsValue",type:"uint256"},{internalType:"uint256",name:"totalValue",type:"uint256"},{internalType:"address",name:"goblin",type:"address"}],internalType:"struct Bank.Pos[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"governor",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"iTokens",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"ibTokenCalculation",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract BankConfig",name:"_config",type:"address"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"posId",type:"uint256"}],name:"kill",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"killWhitelist",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"pendingGovernor",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"posId",type:"uint256"}],name:"positionInfo",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"positions",outputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"productionId",type:"uint256"},{internalType:"uint256",name:"debtShare",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"productions",outputs:[{internalType:"address",name:"coinToken",type:"address"},{internalType:"address",name:"currencyToken",type:"address"},{internalType:"address",name:"borrowToken",type:"address"},{internalType:"bool",name:"isOpen",type:"bool"},{internalType:"bool",name:"canBorrow",type:"bool"},{internalType:"address",name:"goblin",type:"address"},{internalType:"uint256",name:"minDebt",type:"uint256"},{internalType:"uint256",name:"maxDebt",type:"uint256"},{internalType:"uint256",name:"openFactor",type:"uint256"},{internalType:"uint256",name:"liquidateFactor",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"addr",type:"address"}],name:"setDevAddr",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_pendingGovernor",type:"address"}],name:"setPendingGovernor",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"tokenList",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"totalToken",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract BankConfig",name:"_config",type:"address"}],name:"updateConfig",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"}],name:"userPosition",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"pAmount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"withdrawReserve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"posId",type:"uint256"},{internalType:"uint256",name:"pid",type:"uint256"},{internalType:"uint256",name:"borrow",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"work",outputs:[],stateMutability:"payable",type:"function"},{stateMutability:"payable",type:"receive"}]}});