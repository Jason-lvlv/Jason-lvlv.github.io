webpackJsonp([6],{"2gC8":function(t,e){},ShnU:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAA0pJREFUSEu9lk1oHVUUx3/nvj6t2JK8iaaWdO7kRVptCVYR3NbGYCuiteCidVGhgoiIKzf1o34tFN2JXQiCiotKQWlViko1RUFQiNgW48aQzJ1a06bvvRQTCc/OHJnnjKbp+xKKs7vzP/f8z/mfc8+9QptvdmBgw4pCYbeKbFXVjQL9qbnAWYUJERkzcXyw5/TpX1q5kWbAhXXr1sfGvA7syPB54EeBmXStcANwG3BtYylyxCTJU71RNLnc32UEFWsfFXgDuBo4onDAc25M4OLSzQorqr4/IiJPAPcBi6L6eCmK3llqdwlBxdoXBJ4HIjFmT2l6+ng7CXNsztq7EngPGACe9px7Jcf+Icgifwv4oVivb189MzPbjfPc5my5vKYYx8eAYVHdm2fSIJgtl28qxPEJ4LdivX7Hf3W+jGQc6DOqw2lNGgRVaz9OdRTVLaUo+rpV5FXffwaRZKkEy20zuY4hctgLw51yfnDwZpMkP6cF9Zx7oJ0sVWunUL3gRdGtHew+Ae4tJMkGqfj+SyLynIiMlMJwrMPGaVTnOhFUfH+biHwmIvulau03wC0l5zyB+EoQpC1cs3YO+D4lqCFywgvDOzt1TdXarjLI6vqtwFBKkJ7ED7ww3H0lCSq+/5GI7PhfCGrASc+5LV1kMInq752KnEsElNMM0r7f3FWRg+AhVb3Y59yhdsHopk1X1ebnqwrfScXaFwX2Gxjtde7LTll0g1eD4B5Ujzbav9uDpmBq1qYHKPacu79tO/v+UUS2G9X1+ag4nM5+MWZrqwk6NTi4sidJzgNJadWq62Riot6MpOL7d4vI5wIflpx7sEGQXTAn07lXrNdvbzXsqkNDVhcXte/MmaiZ89kgWFtQTYddjxEZ7g3DqX/HdRA8IqpvA6eKxeLo6snJc93ondtkzr9ojGvYU3Lu/RS75MKpBcGzqvoy8KuBh7steibLu8BaYJ/n3KuXXTj5j0oQ7BXVA8BK4FNVfdPr7/9Kxsf/XJpRoxUXFkZRfRLYBvwh8FgeeUuCFJjz/RtjeE1EdmZZLqB6CmNmUBVU1yCyGbjm7zcAh4zIvlTz5bI2fVXkRilRArtUZERgI3B9hp0T+ElVjxtjDjZznPv4C2zYhFWGHFwaAAAAAElFTkSuQmCC"},fsnc:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("Xxa5"),i=n.n(s),a=n("exGp"),o=n.n(a),r=n("OFOn"),c=n("JHeQ"),l={name:"MintDetail",data:function(){return{multiple:1,btnsList:[{label:"25%",val:25},{label:"50%",val:50},{label:"75%",val:75},{label:"100%",val:100}],token0ActivePer:0,token1ActivePer:0,token0Num:"",token1Num:"",borrowActive:0,borrowList:[],tokenInfo:{token0:"",token1:"",name0:"--",name1:"--",balance0:0,balance1:0,decimals0:18,decimals1:18,borrowList:{token0:!0,token1:!0},type:"",posId:"",strategyAdd:"",BankBalance0:"--",BankBalance1:"--"},subBtnLoading:!0,approve1:!1,approve0:!1,tokenToTokenPrice:1}},computed:{borrowToken1:function(){return(Number(this.token0Num)*this.tokenToTokenPrice+Number(this.token1Num))*(this.multiple-1)},borrowToken0:function(){return"0"===this.tokenToTokenPrice?Number(this.token0Num)*(this.multiple-1):(Number(this.token0Num)+Number(this.token1Num)/this.tokenToTokenPrice)*(this.multiple-1)},showBorrowAmount:function(){return 0===this.borrowActive?this.borrowToken0:this.borrowToken1},borrowBalance:function(){return 0===this.borrowActive?this.tokenInfo.BankBalance0:this.tokenInfo.BankBalance1},borrowName:function(){return 0===this.borrowActive?this.tokenInfo.name0:this.tokenInfo.name1},btnDisabled:function(){return this.approve1&&this.approve0&&(!Number(this.token0Num)&&!Number(this.token1Num)||Number(this.token0Num)>this.tokenInfo.balance0||Number(this.token1Num)>this.tokenInfo.balance1||Number(this.showBorrowAmount)>Number(this.borrowBalance))},btnTextInfo:function(){return this.approve0?this.approve1?"开仓":"授权 "+this.tokenInfo.name1:"授权 "+this.tokenInfo.name0},totalTokenASToken1:function(){return 0===this.borrowActive?(Number(this.token0Num)+this.showBorrowAmount)*this.tokenToTokenPrice+Number(this.token1Num):Number(this.token0Num)*this.tokenToTokenPrice+Number(this.token1Num)+this.showBorrowAmount},totalToken0Amount:function(){return this.toFixed(.5*this.totalTokenASToken1/this.tokenToTokenPrice,6)},totalToken1Amount:function(){return this.toFixed(.5*this.totalTokenASToken1,6)}},created:function(){var t=this;try{var e=sessionStorage.getItem("mintInfo"),n=JSON.parse(e);for(var s in n)this.tokenInfo[s]=n[s];n.multiple&&!isNaN(n.multiple)&&(this.multiple=Number(n.multiple)),n.borrowList&&!n.borrowList.token0&&(this.borrowActive=1)}catch(t){}setTimeout(function(){t.getAllBalancesApprove()},300),console.log("type",this.tokenInfo)},methods:{inputEvent:function(t,e){this[e]=this.$inputLimit(t,6,!0);var n=0;switch(e){case"token0Num":n=this.tokenInfo.balance0,this.token0ActivePer=Number(this[e])/n*100,console.log(this.token0ActivePer);break;case"token1Num":n=this.tokenInfo.balance1,this.token1ActivePer=Number(this[e])/n*100,console.log(this.token1ActivePer)}},perBalanceClick:function(t,e){0===t?(this.token0Num=this.toFixed(this.tokenInfo.balance0*e/100,6),this.token0ActivePer=e):1===t&&(this.token1Num=this.toFixed(this.tokenInfo.balance1*e/100,6),this.token1ActivePer=e)},confirmMint:function(){var t=this,e=this.tokenInfo,n=e.token0,s=e.token1,i=e.decimals0,a=e.decimals1,o=e.strategyAdd;this.approve1?this.approve0?Object(c.h)(s,n,0,this.token0Num,a,i,this.toFixed(this.borrowToken1,6),0,this.tokenInfo.posId,o):Object(c.b)(n,o).then(function(){t.approve0=!0}):Object(c.b)(s,o).then(function(){t.approve1=!0})},getAllBalancesApprove:function(){var t=this;return o()(i.a.mark(function e(){var n,s,a,o,c,l,v,u;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.tokenInfo,s=n.token0,a=n.token1,o=n.decimals0,c=n.decimals1,l=n.strategyAdd,!s){e.next=9;break}return e.next=4,Object(r.d)(s,o);case 4:return v=e.sent,t.tokenInfo.balance0=v,e.next=8,Object(r.x)(s,o,v,l);case 8:t.approve0=e.sent;case 9:if(!a){e.next=17;break}return e.next=12,Object(r.d)(a,c);case 12:return u=e.sent,t.tokenInfo.balance1=u,e.next=16,Object(r.x)(a,c,u,l);case 16:t.approve1=e.sent;case 17:return e.next=19,Object(r.s)(s,a);case 19:t.tokenToTokenPrice=e.sent,t.subBtnLoading=!1,console.log("tokenToTokenPrice",t.tokenToTokenPrice);case 22:case"end":return e.stop()}},e,t)}))()}}},v={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mintDetail-page"},[s("div",{staticClass:"container"},[s("div",{staticClass:"common-top-nav"},[s("img",{attrs:{src:n("Gvdv")}}),t._v(" "),s("img",{staticClass:"img2",attrs:{src:n("QinY")}}),t._v(" "),s("span",{staticClass:"tit"},[t._v(t._s(t.tokenInfo.name0+"-"+t.tokenInfo.name1))])]),t._v(" "),t._m(0),t._v(" "),s("div",{staticClass:"seleArea"},[s("div",{staticClass:"title"},[t._v("提供资产")]),t._v(" "),s("div",{staticClass:"coinList"},[s("div",{staticClass:"item"},[s("p",{staticClass:"balance"},[Number(t.token0Num)>t.tokenInfo.balance0?s("span",{staticClass:"balaLack"},[t._v("当前地址余额不足")]):t._e(),t._v(" "),s("span",{staticClass:"tit"},[t._v("余额：")]),t._v(" "),s("span",{staticClass:"num"},[t._v(t._s(t.toFixed(t.tokenInfo.balance0,6)||"--")+" "+t._s(t.tokenInfo.name0))])]),t._v(" "),s("div",{staticClass:"sele-area"},[s("img",{attrs:{src:n("Gvdv"),alt:""}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.token0Num,expression:"token0Num"}],attrs:{type:"number",minLength:"1",maxLength:"79"},domProps:{value:t.token0Num},on:{input:[function(e){e.target.composing||(t.token0Num=e.target.value)},function(e){return t.inputEvent(e,"token0Num")}]}}),t._v(" "),s("div",{staticClass:"kind"},[t._v(t._s(t.tokenInfo.name0))])]),t._v(" "),s("div",{staticClass:"btn-area"},t._l(t.btnsList,function(e){return s("div",{key:e.val,class:["btn",{active:t.token0ActivePer===e.val}],on:{click:function(n){return t.perBalanceClick(0,e.val)}}},[t._v("\n                            "+t._s(e.label)+"\n                        ")])}),0)]),t._v(" "),s("div",{staticClass:"item"},[s("p",{staticClass:"balance"},[Number(t.token1Num)>t.tokenInfo.balance1?s("span",{staticClass:"balaLack"},[t._v("当前地址余额不足")]):t._e(),t._v(" "),s("span",{staticClass:"tit"},[t._v("余额：")]),t._v(" "),s("span",{staticClass:"num"},[t._v(t._s(t.toFixed(t.tokenInfo.balance1,6)||"--")+" "+t._s(t.tokenInfo.name1))])]),t._v(" "),s("div",{staticClass:"sele-area"},[s("img",{attrs:{src:n("Gvdv"),alt:""}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.token1Num,expression:"token1Num"}],attrs:{type:"number",minLength:"1",maxLength:"79"},domProps:{value:t.token1Num},on:{input:[function(e){e.target.composing||(t.token1Num=e.target.value)},function(e){return t.inputEvent(e,"token1Num")}]}}),t._v(" "),s("div",{staticClass:"kind"},[t._v(t._s(t.tokenInfo.name1))])]),t._v(" "),s("div",{staticClass:"btn-area"},t._l(t.btnsList,function(e){return s("div",{key:e.val,class:["btn",{active:t.token1ActivePer===e.val}],on:{click:function(n){return t.perBalanceClick(1,e.val)}}},[t._v("\n                            "+t._s(e.label)+"\n                        ")])}),0)])])]),t._v(" "),s("div",{staticClass:"mutiSele"},[s("div",{staticClass:"title"},[t._v(" 杠杆倍数 ")]),t._v(" "),s("div",{staticClass:"area"},[s("div",{staticClass:"seleBar"},[s("mt-range",{attrs:{step:1,max:9,min:1,barHeight:5},model:{value:t.multiple,callback:function(e){t.multiple=e},expression:"multiple"}}),t._v(" "),t._m(1)],1),t._v(" "),s("div",{staticClass:"display"},[s("span",{staticClass:"num"},[t._v(t._s(t.multiple))]),t._v(" "),s("span",{staticClass:"x"},[t._v("x")])])])]),t._v(" "),s("div",{staticClass:"browposition"},[s("div",{staticClass:"title"},[t._m(2),t._v(" "),s("div",{staticClass:"balance"},[s("span",[t._v("可用余额：")]),t._v("\n                    "+t._s(t.toFixed(t.borrowBalance,6)||"--")+"\n                    "),Number(t.showBorrowAmount)>Number(t.borrowBalance)?s("span",{staticClass:"balaLack"},[t._v("超过最大可借出余额")]):t._e()])]),t._v(" "),s("div",{staticClass:"btns"},[t.tokenInfo.borrowList.token0?s("div",{class:["item",{active:0===t.borrowActive}],on:{click:function(e){t.borrowActive=0}}},[t._v("\n                    "+t._s(t.tokenInfo.name0)+"\n                ")]):t._e(),t._v(" "),t.tokenInfo.borrowList.token1?s("div",{class:["item",{active:1===t.borrowActive}],on:{click:function(e){t.borrowActive=1}}},[t._v("\n                   "+t._s(t.tokenInfo.name1)+"\n                ")]):t._e()]),t._v(" "),t._m(3)]),t._v(" "),s("div",{staticClass:"handlingFee"},[t._m(4),t._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"line"},[s("div",{staticClass:"tit"},[t._v("提供资产")]),t._v(" "),s("div",{staticClass:"cnt"},[t._v(t._s(t.toFixed(t.token0Num||0,6))+" "+t._s(t.tokenInfo.name0)+" + "+t._s(t.toFixed(t.token1Num||0,6))+" "+t._s(t.tokenInfo.name1))])]),t._v(" "),s("div",{staticClass:"line"},[s("div",{staticClass:"tit"},[t._v("借入资产")]),t._v(" "),s("div",{staticClass:"cnt"},[t._v(t._s(t.toFixed(t.showBorrowAmount||0,6))+" "+t._s(t.borrowName))])]),t._v(" "),s("div",{staticClass:"line"},[s("div",{staticClass:"tit"},[t._v("资产总价值")]),t._v(" "),s("div",{staticClass:"cnt"},[t._v(t._s(t.totalToken0Amount+" "+t.tokenInfo.name0)+" +  "+t._s(t.totalToken1Amount+" "+t.tokenInfo.name1))])]),t._v(" "),t._m(5),t._v(" "),t._m(6)])]),t._v(" "),s("div",{staticClass:"submitOrder"},[s("button",{class:["enter",{disabled:t.btnDisabled}],attrs:{disabled:t.btnDisabled},on:{click:t.confirmMint}},[t._v("\n                "+t._s(t.btnTextInfo)+"\n                "),t.subBtnLoading?s("span",{staticClass:"inner"},[s("mt-spinner",{attrs:{type:"fading-circle"}})],1):t._e()]),t._v(" "),s("div",{staticClass:"btn",on:{click:function(e){return t.$router.go(-1)}}},[t._v("\n                返回\n            ")])])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"infoBar"},[n("div",{staticClass:"content"},[n("div",{staticClass:"item"},[n("div",{staticClass:"num"},[t._v("1")]),t._v(" "),n("p",[t._v("授权")])]),t._v(" "),n("div",{staticClass:"item"},[n("div",{staticClass:"num"},[t._v("2")]),t._v(" "),n("p",[t._v("配置杠杆参数")])]),t._v(" "),n("div",{staticClass:"item"},[n("div",{staticClass:"num"},[t._v("3")]),t._v(" "),n("p",[t._v("确认开仓")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"barinfo"},[e("span",[this._v("1x")]),this._v(" "),e("span",[this._v("9x")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"info"},[this._v("\n                    借入资产\n                    "),e("span",[this._v("(最小值：100，最大值：50000000)")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"warnTips"},[e("img",{attrs:{src:n("ShnU"),alt:""}}),this._v(" "),e("span",[this._v("建议分别提供两种等值的资产，可最大程度减少手续费及滑点损失。")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("div",{staticClass:"info"},[this._v("\n                    价格影响及交易手续费\n                ")]),this._v(" "),e("div",{staticClass:"balance"},[this._v("\n                    - 20%\n                ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"line"},[e("div",{staticClass:"tit"},[this._v("当前风险系数")]),this._v(" "),e("div",{staticClass:"cnt"},[this._v("88.88%")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"line"},[e("div",{staticClass:"tit"},[this._v("综合年化收益率（复利）")]),this._v(" "),e("div",{staticClass:"cnt"},[e("span",{staticClass:"green"},[this._v("502.02%")])])])}]};var u=n("VU/8")(l,v,!1,function(t){n("2gC8")},"data-v-5a69b7ea",null);e.default=u.exports}});